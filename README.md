# TI 杯 2023 年全国大学生电子设计竞赛 - 运动目标控制与自动追踪系统（E 题）
【2023年电赛】运动目标控制与自动追踪系统（E 题） ---- 视觉识别算法方案

目标识别原理：
- 控制通信在串口传输下使用 乒乓通信， 原理：让 K210 对 下位机 进行 一问一答通信。下位机使用多位速度值进行 速度调控，运动动态稳定。上位机只需要对其发送速度信号量或者方位移动信号量就可以轻松变速控制下位机前往我们想要的坐标点。
- 整体识别算法，我们使用了一种方位重心调整 + 脉冲步数统计的方式 将 精准 和 速度 同时展现到 我们的识别系统上。我们系统会优先识别4个框，并通过速度自动调控快速前往框的角点。并且我们可以很方便的得到我们自身镭射的坐标点，因为是固定的。
- 我们封装了4个主要函数： findRect()、nextLaser()、serial_write()、serial_read() 四个核心函数，我们首先通过计算相对距离的脉冲步数 快速达到 我们要的下一个有向图坐标点，这里findRect() 的函数通过一定的阈值判定 会返回 我们所要的 矩形的四个边角，在这里我们也  做了一定了偏移量, 因为通过多次测量发现，检测的四个交点 通常会比原有的矩形交点向外扩展个一小段距离空间，因此我们在这使用偏移量来解决了微调问题。
nextLaser()函数 则是作为我们主要的寻路函数，里面封装了脉冲计步和视觉重心吸引2个算法，脉冲计步是通过一个权重W1分别乘上目标点x和y与镭射坐标的x和y值得到2个相对坐标的预估步数，这里我们把预估步数可以设置的偏小一点，为了方便我们后续的视觉重心吸引算法来视觉寻路到我们所要的重心点。这里先使用xy同步斜动到预估步数的最小x或y的值上，然后在平动到预估坐标，最后进入视觉寻路。
视觉寻路算法则是利用一种吸引点的特殊寻路模式，镭射坐标会自主搜寻离自己最近的矩形角点，这里是通过两点坐标距离公式可以轻松得到，然后自主前往，这里我们需要特别注重一点，我们的矩形搜素时，会存在4个坐标点，也就是4个吸引重心，这里我们就可以通过前者的脉冲步数模式，快速通往下一个吸引重心的影响区域，然后任其引力自动吸引到坐标正中，此算法同理可用于扩展任务的追逐模式下，追逐模式对于绿点而言全图只会存在一个吸引重心，然后通过两点距离公式可以灵活进行追逐战。
